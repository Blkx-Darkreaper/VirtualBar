<!-- <form [formGroup]="selectionForm" (ngSubmit)="onSubmit()"> -->
    <div class = "top-bar container" name="criteria">
        <form class="one-column" #typeForm="ngForm">
            <label for="Type">Drink Type:</label>
            <br>

            <div class="wrap" name ="select-type">
                <div>
                    <input type="checkbox" 
                        id="{{ typeOptions.name | lowercase }}-{{ ALL | lowercase }}" 
                        name="{{ typeOptions.name }}" 
                        value="{{ ALL }}"
                        [indeterminate]="typeOptions?.indeterminate"
                        [ngModel]="typeOptions.selected"
                        (ngModelChange)="typeOptions.selected = $event;
                            allSelectedTypes = setGroupSelected(typeOptions, $event);
                            updateSelectedQueryParams()" />
                    <label for="{{ typeOptions.name | lowercase }}-{{ ALL | lowercase }}">(Select All)</label>
                </div>

                <div *ngFor="let subOption of typeOptions.subOptions; let i = index">
                    <input type="checkbox"
                        id="{{ typeOptions.name | lowercase }}-{{ subOption.name | lowercase }}" 
                        name="{{ typeOptions.name }}"
                        value="{{ subOption.name }}"
                        [ngModel]="subOption.selected"
                        (ngModelChange)="subOption.selected = $event;
                            allSelectedTypes = toggleSelected(typeOptions, subOption.name);
                            updateSelectedQueryParams()" />
                    <label for="{{ typeOptions.name | lowercase }}-{{ subOption.name | lowercase }}">
                        {{ subOption.name }}
                    </label>
                </div>
            </div>
            <!-- <pre>Types: {{ allTypes | json }}</pre> -->
            <!-- <pre>Selected: {{ allSelectedTypes | json }}</pre> -->
        </form>

        <form class="two-column" #styleForm="ngForm">
            <label for="Style">Preparation Style:</label>
            <br>

            <div class="wrap" name = "select-style">
                <div>
                    <input type="checkbox" 
                        id="{{ styleOptions.name | lowercase }}-{{ ALL | lowercase }}" 
                        name="{{ styleOptions.name }}" 
                        value="{{ ALL }}"
                        [indeterminate]="styleOptions?.indeterminate"
                        [ngModel]="styleOptions.selected"
                        (ngModelChange)="styleOptions.selected = $event;
                         setGroupSelected(styleOptions, $event)" />
                    <label for="{{ styleOptions.name | lowercase }}-{{ ALL | lowercase }}">(Select All)</label>
                </div>

                <div *ngFor="let subOption of styleOptions.subOptions; let i = index">
                    <input type="checkbox"
                        id="{{ styleOptions.name | lowercase }}-{{ subOption.name | lowercase }}" 
                        name="{{ styleOptions.name }}"
                        value="{{ subOption.name }}"
                        [ngModel]="subOption.selected"
                        (ngModelChange)="subOption.selected = $event;
                            toggleSelected(styleOptions, subOption.name)" />
                    <label for="{{ styleOptions.name | lowercase }}-{{ subOption.name | lowercase }}">
                        {{ subOption.name }}
                    </label>
                </div>
            </div>
        </form>
        
        <!-- <pre>Styles: {{ allStyles | json }}</pre>
        <pre>Selected: {{ allSelectedStyles | json }}</pre> -->

        <form class="three-column" #familyForm="ngForm">
            <label for="Family">Cocktail Family:</label>
            <br>

            <div class="wrap" name="select-family">
                <div>
                    <input type="checkbox" 
                        id="{{ familyOptions.name | lowercase }}-{{ ALL | lowercase }}" 
                        name="{{ familyOptions.name }}" 
                        value="{{ ALL }}"
                        [indeterminate]="familyOptions?.indeterminate"
                        [ngModel]="familyOptions.selected"
                        (ngModelChange)="familyOptions.selected = $event;
                         setGroupSelected(familyOptions, $event)" />
                    <label for="{{ familyOptions.name | lowercase }}-{{ ALL | lowercase }}">(Select All)</label>
                </div>

                <div *ngFor="let subOption of familyOptions.subOptions; let i = index">
                    <input type="checkbox"
                        id="{{ familyOptions.name | lowercase }}-{{ subOption.name | lowercase }}" 
                        name="{{ familyOptions.name }}"
                        value="{{ subOption.name }}"
                        [ngModel]="subOption.selected"
                        (ngModelChange)="subOption.selected = $event;
                            toggleSelected(familyOptions, subOption.name)" />
                    <label for="{{ familyOptions.name | lowercase }}-{{ subOption.name | lowercase }}">
                        {{ subOption.name }}
                    </label>
                </div>
            </div>
        </form>
        <!-- <pre>Families: {{ allFamilies | json }}</pre> -->
        <!-- <pre>Selected: {{ allSelectedFamilies | json }}</pre> -->

        <form class="one-column">
            <label>Muddling:</label>
            <br>
                <div>
            <input type="checkbox" id="muddle" name="muddle" value="reqMuddling" [(ngModel)]="muddlingRequired">
            <label for="search">Required</label>
        </div>
        </form>
    </div>

    <pre>Types: {{ typeOptions.subOptions | json }}</pre>

    <br>

    <div class="top-bar container">
        <form class="four-deep" #occasionForm="ngForm">
            <label for="Type">Appropriate for Occasion:</label>
            <br>

            <div class="wrap" name ="select-occasion">
                <div>
                    <input type="checkbox" 
                        id="{{ occasionOptions.name | lowercase }}-{{ ALL | lowercase }}" 
                        name="{{ occasionOptions.name }}" 
                        value="{{ ALL }}"
                        [indeterminate]="occasionOptions?.indeterminate"
                        [ngModel]="occasionOptions.selected"
                        (ngModelChange)="occasionOptions.selected = $event;
                         setGroupSelected(occasionOptions, $event)" />
                    <label for="{{ occasionOptions.name | lowercase }}-{{ ALL | lowercase }}">(Select All)</label>
                </div>

                <div *ngFor="let subOption of occasionOptions.subOptions; let i = index">
                    <input type="checkbox"
                        id="{{ occasionOptions.name | lowercase }}-{{ subOption.name | lowercase }}" 
                        name="{{ occasionOptions.name }}"
                        value="{{ subOption.name }}"
                        [ngModel]="subOption.selected"
                        (ngModelChange)="subOption.selected = $event;
                            toggleSelected(occasionOptions, subOption.name)" />
                    <label for="{{ occasionOptions.name | lowercase }}-{{ subOption.name | lowercase }}">
                        {{ subOption.name }}
                    </label>
                </div>
            </div>
        </form>
        
        <!-- <pre>Occasions: {{ allOccasions | json }}</pre>
        <pre>Selected: {{ allSelectedOccasions | json }}</pre> -->
    </div>

    <br>

    <div class="mid-bar container">
        <form class="three-deep" #mainComponentsForm="ngForm">
            <label for="Main">Spirits:</label>
            <br>

            <div class="wrap" name="main-components">
                <div class="item">
                    <input type="checkbox" 
                        id="{{ primaryOptions.name | lowercase }}-{{ ALL | lowercase }}" 
                        name="{{ primaryOptions.name }}" 
                        value="{{ ALL }}"
                        [indeterminate]="primaryOptions?.indeterminate"
                        [ngModel]="primaryOptions.selected"
                        (ngModelChange)="primaryOptions.selected = $event;
                         setGroupSelected(primaryOptions, $event)" />
                    <label for="{{ primaryOptions.name | lowercase }}-{{ ALL | lowercase }}">(Select All)</label>
                </div>

                <div *ngFor="let subOption of primaryOptions.subOptions; let i = index"  class="item">
                    <input type="checkbox"
                        id="{{ primaryOptions.name | lowercase }}-{{ subOption.name | lowercase }}" 
                        name="{{ primaryOptions.name }}"
                        value="{{ subOption.name }}"
                        [ngModel]="subOption.selected"
                        (ngModelChange)="subOption.selected = $event;
                            toggleSelected(primaryOptions, subOption.name)" />
                    <label for="{{ primaryOptions.name | lowercase }}-{{ subOption.name | lowercase }}">
                        {{ subOption.name }}
                    </label>
                </div>
            </div>
        <!-- <pre>Main Components: {{ allPrimaryComponents | json }}</pre> -->
        <!-- <pre>Selected: {{ allSelectedPrimaryComponents | json }}</pre> -->
        </form>
        </div>

        <br>

        <div class="mid-bar container">
        <form class="fifteen-deep" #secondaryComponentsForm="ngForm">
            <label for="Auxiliary">Auxiliary Components:</label>
            <br>

            <div class="wrap" name="secondary-components">
                <div class="item">
                    <input type="checkbox" 
                        id="{{ secondaryOptions.name | lowercase }}-{{ ALL | lowercase }}" 
                        name="{{ secondaryOptions.name }}" 
                        value="{{ ALL }}"
                        [indeterminate]="secondaryOptions?.indeterminate"
                        [ngModel]="secondaryOptions.selected"
                        (ngModelChange)="secondaryOptions.selected = $event;
                         setGroupSelected(secondaryOptions, $event)" />
                    <label for="{{ secondaryOptions.name | lowercase }}-{{ ALL | lowercase }}">(Select All)</label>
                </div>

                <div *ngFor="let subOption of secondaryOptions.subOptions; let i = index" class="item">
                    <input type="checkbox"
                        id="{{ secondaryOptions.name | lowercase }}-{{ subOption.name | lowercase }}" 
                        name="{{ secondaryOptions.name }}"
                        value="{{ subOption.name }}"
                        [ngModel]="subOption.selected"
                        (ngModelChange)="subOption.selected = $event;
                            toggleSelected(secondaryOptions, subOption.name)" />
                    <label for="{{ secondaryOptions.name | lowercase }}-{{ subOption.name | lowercase }}">
                        {{ subOption.name }}
                    </label>
                </div>
            </div>
            <!-- <pre>Auxiliary Components: {{ allSecondaryComponents | json }}</pre> -->
            <!-- <pre>Selected: {{ allSelectedSecondaryComponents | json }}</pre> -->
        </form>
    </div>

    <br>

     <div class="mid-bar container">
        <form class="thirty-deep" #specificComponentsForm="ngForm">
            <label for="Misc">Filter by Specific Ingredients:</label>
            <br>

            <div class="wrap" name="specific-components">
                <div *ngFor="let option of allSpecificIngredients; let i = index" class="item">
                    <button [hidden]="!allSpecificIngredients[i].enabled" value=i
                     (click)="removeSpecificComponentFilter(i)">-</button>

                    <div *ngFor="let drilldown of getAllSpecificComponentLevels(allSpecificIngredients[i])" >
                        <select id="{{ drilldown.level.toString() | lowercase }}-{{ drilldown.id }}"
                        [hidden]="!drilldown.enabled"
                        [(ngModel)]="drilldown.selected"
                        name="{{ drilldown.level.toString() | lowercase }}-{{ drilldown.id }}}">
                            <option *ngFor="let value of drilldown.allValues" 
                                [ngValue]="value">
                                {{ value }}
                            </option>
                        </select>
                    </div>
                </div>
                <button (click)="addSpecificComponentFilter()">+</button>
                <!--<div>
                    <input type="checkbox" 
                            id="tertiary-all" 
                            name="{{ tertiaryOptions.name }}" 
                            value="all" 
                            [checked]="areAllTertiaryComponentsSelected" 
                            (change)="setGroupSelected($event.target.name, $event.target.checked)" />
                    <label for="tertiary-all">(Select All)</label>
                </div>

                <div *ngFor="let subOption of tertiaryOptions.subOptions; let i = index">
                    <input type="checkbox"
                        id="secondary-{{ tertiaryOptions.subOptions[i].name | lowercase }}" 
                        name="{{ tertiaryOptions.name }}"
                        value="{{ tertiaryOptions.subOptions[i].name }}"
                        [disabled]="!tertiaryOptions.subOptions[i].enabled"
                        [(ngModel)]="tertiaryOptions.subOptions[i].selected" 
                        (ngModelChange)="toggleSelected(tertiaryOptions.name, tertiaryOptions.subOptions[i].name, $event)">
                    <label for="tertiary-{{ tertiaryOptions.subOptions[i].name | lowercase }}">
                        {{ tertiaryOptions.subOptions[i].name }}
                    </label>
                </div> -->
            </div>
            <!-- <pre>Non-Alcoholic Components: {{ allTertiaryComponents | json }}</pre>
            <pre>Selected: {{ allSelectedTertiaryComponents | json }}</pre> -->
        </form>
    </div>

    <br>
    <br>

    <div class = "bottom-bar container">
        <div name = "search">
            <label for="search">Filter by name:</label>
            <br>
            <input type="text" id="search" name="search" placeholder="..." [(ngModel)] = "nameToFind"
             (ngModelChange)="updateSelectedQueryParams()">
        </div>

        <div name = "inventory">
            <input type="checkbox" id="available" name="available" value="isAvailable" 
            [(ngModel)]="limitToAvailable"
            (ngModelChange)="updateAvailableComponentsBasedOnInventory()">
            <label for="available">Limit to currently available</label>
            <!-- <pre>Limit: {{ limitToAvailable }}</pre> -->
            <br>
            <label>User: {{ selectedUserId }}</label>
            <a>Goto Inventory >></a>
            <!-- <pre>{{ allAvailableLiquors | json }}</pre> -->
        </div>
    </div>

     <!-- <button type="submit" [disabled]="!selectionForm.valid">Refresh Recipe List</button> -->
<!--</form> -->

<hr>

<app-recipe-list 
    [types]="allSelectedTypes"
    [occasions]="allSelectedOccasions"
    [styles]="allSelectedStyles"
    [families]="allSelectedFamilies"
    [muddling]="muddlingRequired"
    [primaries]="allSelectedPrimaryComponents"
    [secondaries]="allSelectedSecondaryComponents"
    [name]="nameToFind"
    [inventory]="selectedInventory"
    [user]="selectedUserId"
    [limit]="limitToAvailable"
    [liquors]="allAvailableLiquors"
    [spirits]="allAvailableSpirits"
    [nonspirits]="allAvailableNonSpirits"
></app-recipe-list>